{"remainingRequest":"/home/jean/Документы/GitHub/meetup-firebase/node_modules/thread-loader/dist/cjs.js!/home/jean/Документы/GitHub/meetup-firebase/node_modules/babel-loader/lib/index.js!/home/jean/Документы/GitHub/meetup-firebase/src/store/user/index.js","dependencies":[{"path":"/home/jean/Документы/GitHub/meetup-firebase/src/store/user/index.js","mtime":1645141260389},{"path":"/home/jean/Документы/GitHub/meetup-firebase/babel.config.js","mtime":1640172662233},{"path":"/home/jean/Документы/GitHub/meetup-firebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jean/Документы/GitHub/meetup-firebase/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jean/Документы/GitHub/meetup-firebase/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2plYW4vXHUwNDE0XHUwNDNFXHUwNDNBXHUwNDQzXHUwNDNDXHUwNDM1XHUwNDNEXHUwNDQyXHUwNDRCL0dpdEh1Yi9tZWV0dXAtZmlyZWJhc2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgeyBnZXRBdXRoLCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLCBzaWduT3V0IH0gZnJvbSAiZmlyZWJhc2UvYXV0aCI7CmltcG9ydCB7IGdldERhdGFiYXNlLCByZWYsIHB1c2gsIHNldCwgb25WYWx1ZSwgdXBkYXRlLCByZW1vdmUgfSBmcm9tICJmaXJlYmFzZS9kYXRhYmFzZSI7CmltcG9ydCB7IGdldFN0b3JhZ2UsIHJlZiBhcyBzUmVmLCB1cGxvYWRCeXRlcywgZ2V0RG93bmxvYWRVUkwgfSBmcm9tICJmaXJlYmFzZS9zdG9yYWdlIjsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiB7CiAgICB1c2VyOiBudWxsCiAgfSwKICBnZXR0ZXJzOiB7CiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICB1c2VyUmVnaXN0ZXJGb3JNZWV0dXA6IGZ1bmN0aW9uIHVzZXJSZWdpc3RlckZvck1lZXR1cChzdGF0ZSwgbWVldHVwSWRPYmopIHsKICAgICAgc3RhdGUudXNlci5yZWdpc3Rlck1lZXR1cC5wdXNoKG1lZXR1cElkT2JqLmlkKTsKICAgICAgc3RhdGUudXNlci5mYktleXNbbWVldHVwSWRPYmouaWRdID0gbWVldHVwSWRPYmouZmJLZXk7CiAgICB9LAogICAgdXNlclVuUmVnaXN0ZXJGcm9tTWVldHVwOiBmdW5jdGlvbiB1c2VyVW5SZWdpc3RlckZyb21NZWV0dXAoc3RhdGUsIG1lZXR1cElkKSB7CiAgICAgIHZhciByZWdpc3Rlck1lZXR1cCA9IHN0YXRlLnVzZXIucmVnaXN0ZXJNZWV0dXA7CiAgICAgIHJlZ2lzdGVyTWVldHVwLnNwbGljZShyZWdpc3Rlck1lZXR1cC5maW5kSW5kZXgoZnVuY3Rpb24gKG1lZXR1cCkgewogICAgICAgIHJldHVybiBtZWV0dXAgPT09IG1lZXR1cElkOwogICAgICB9KSwgMSk7CiAgICAgIGRlbGV0ZSBzdGF0ZS51c2VyLmZiS2V5c1ttZWV0dXBJZF07CiAgICB9LAogICAgc2V0VXNlcjogZnVuY3Rpb24gc2V0VXNlcihzdGF0ZSwgbmV3VXNlcikgewogICAgICBzdGF0ZS51c2VyID0gbmV3VXNlcjsKICAgIH0sCiAgICBzZXRVc2VyRmllbGQ6IGZ1bmN0aW9uIHNldFVzZXJGaWVsZChzdGF0ZSwgb2JqKSB7CiAgICAgIGZvciAodmFyIGZpZWxkIGluIG9iaikgewogICAgICAgIHN0YXRlLnVzZXJbZmllbGRdID0gb2JqW2ZpZWxkXTsKICAgICAgfQogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgdXNlclJlZ2lzdGVyRm9yTWVldHVwOiBmdW5jdGlvbiB1c2VyUmVnaXN0ZXJGb3JNZWV0dXAoX3JlZiwgbWVldHVwSWQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICAgICAgZ2V0dGVycyA9IF9yZWYuZ2V0dGVyczsKICAgICAgY29tbWl0KCdzZXRMb2FkaW5nJywgdHJ1ZSk7CiAgICAgIHZhciBkYiA9IGdldERhdGFiYXNlKCk7CiAgICAgIHZhciB1c2VyID0gZ2V0dGVycy51c2VyOwogICAgICB2YXIgcmVnaXN0ZXJlZE1lZXR1cHMgPSBwdXNoKHJlZihkYiwgIi91c2Vycy8iLmNvbmNhdCh1c2VyLmlkLCAiL3JlZ2lzdHJhdGlvbnMiKSkpOwogICAgICB2YXIgbWVldHVwS2V5ID0gcmVnaXN0ZXJlZE1lZXR1cHMua2V5OwogICAgICBzZXQocmVnaXN0ZXJlZE1lZXR1cHMsIG1lZXR1cElkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CiAgICAgICAgY29tbWl0KCd1c2VyUmVnaXN0ZXJGb3JNZWV0dXAnLCB7CiAgICAgICAgICBpZDogbWVldHVwSWQsCiAgICAgICAgICBmYktleTogbWVldHVwS2V5CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHVzZXJVblJlZ2lzdGVyRnJvbU1lZXR1cDogZnVuY3Rpb24gdXNlclVuUmVnaXN0ZXJGcm9tTWVldHVwKF9yZWYyLCBtZWV0dXBJZCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgICAgZ2V0dGVycyA9IF9yZWYyLmdldHRlcnM7CiAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIHRydWUpOwogICAgICB2YXIgZGIgPSBnZXREYXRhYmFzZSgpOwogICAgICB2YXIgdXNlciA9IGdldHRlcnMudXNlcjsKICAgICAgdmFyIHJlZ2lzdGVyZWRNZWV0dXBzID0gcmVmKGRiLCAiL3VzZXJzLyIuY29uY2F0KHVzZXIuaWQsICIvcmVnaXN0cmF0aW9ucy8iKS5jb25jYXQodXNlci5mYktleXNbbWVldHVwSWRdKSk7CiAgICAgIHJlbW92ZShyZWdpc3RlcmVkTWVldHVwcykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29tbWl0KCd1c2VyVW5SZWdpc3RlckZyb21NZWV0dXAnLCBtZWV0dXBJZCk7CiAgICAgICAgY29tbWl0KCdzZXRMb2FkaW5nJywgZmFsc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgY29tbWl0KCdzZXRMb2FkaW5nJywgZmFsc2UpOwogICAgICB9KTsKICAgIH0sCiAgICBzaWdoVXBVc2VyOiBmdW5jdGlvbiBzaWdoVXBVc2VyKF9yZWYzLCB1c2VyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIHRydWUpOwogICAgICBjb21taXQoJ2NsZWFyRXJyb3InKTsKICAgICAgdmFyIGF1dGggPSBnZXRBdXRoKCk7CiAgICAgIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCB1c2VyLmVtYWlsLCB1c2VyLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgdmFyIG5ld1VzZXIgPSB7CiAgICAgICAgICBpZDogdXNlci51c2VyLnVpZCwKICAgICAgICAgIGVtYWlsOiB1c2VyLnVzZXIuZW1haWwsCiAgICAgICAgICByZWdpc3Rlck1lZXR1cDogW10sCiAgICAgICAgICBmYktleXM6IHt9LAogICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICBhdmF0YXI6ICcnCiAgICAgICAgfTsKICAgICAgICBjb21taXQoJ3NldFVzZXInLCBuZXdVc2VyKTsKICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbW1pdCgnc2V0RXJyb3InLCBlcnJvcik7CiAgICAgICAgY29tbWl0KCdzZXRMb2FkaW5nJywgZmFsc2UpOwogICAgICB9KTsKICAgIH0sCiAgICBzaWdoSW5Vc2VyOiBmdW5jdGlvbiBzaWdoSW5Vc2VyKF9yZWY0LCB1c2VyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIHRydWUpOwogICAgICBjb21taXQoJ2NsZWFyRXJyb3InKTsKICAgICAgdmFyIGF1dGggPSBnZXRBdXRoKCk7CiAgICAgIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIHVzZXIuZW1haWwsIHVzZXIucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICB2YXIgbmV3VXNlciA9IHsKICAgICAgICAgIGlkOiB1c2VyLnVzZXIudWlkLAogICAgICAgICAgZW1haWw6IHVzZXIudXNlci5lbWFpbCwKICAgICAgICAgIHJlZ2lzdGVyTWVldHVwOiBbXSwKICAgICAgICAgIGZiS2V5czoge30sCiAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgIGF2YXRhcjogJycKICAgICAgICB9OwogICAgICAgIGNvbW1pdCgnc2V0VXNlcicsIG5ld1VzZXIpOwogICAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIGZhbHNlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29tbWl0KCdzZXRFcnJvcicsIGVycm9yKTsKICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGF1dG9BdXRoOiBmdW5jdGlvbiBhdXRvQXV0aChfcmVmNSwgdXNlcikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgICBjb21taXQoJ3NldFVzZXInLCB7CiAgICAgICAgaWQ6IHVzZXIudWlkLAogICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLAogICAgICAgIHJlZ2lzdGVyTWVldHVwOiBbXSwKICAgICAgICBmYktleXM6IHt9LAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGF2YXRhcjogJycKICAgICAgfSk7CiAgICB9LAogICAgZmV0Y2hEYXRhOiBmdW5jdGlvbiBmZXRjaERhdGEoX3JlZjYpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGlzcGF0Y2g7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmNi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdmZXRjaFVzZXJNZWV0dXAnKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2ZldGNoVXNlckluZm8nKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGZldGNoVXNlck1lZXR1cDogZnVuY3Rpb24gZmV0Y2hVc2VyTWVldHVwKF9yZWY3KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBjb21taXQsIGdldHRlcnMsIGRiLCB1c2VyTWVldHVwSWQsIHVzZXJNZWV0dXBGYktleXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY3LmNvbW1pdCwgZ2V0dGVycyA9IF9yZWY3LmdldHRlcnM7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCB0cnVlKTsKICAgICAgICAgICAgICAgIGRiID0gZ2V0RGF0YWJhc2UoKTsKICAgICAgICAgICAgICAgIHVzZXJNZWV0dXBJZCA9IFtdOwogICAgICAgICAgICAgICAgdXNlck1lZXR1cEZiS2V5cyA9IHt9OwogICAgICAgICAgICAgICAgb25WYWx1ZShyZWYoZGIsICIvdXNlcnMvIi5jb25jYXQoZ2V0dGVycy51c2VyLmlkLCAiL3JlZ2lzdHJhdGlvbnMiKSksIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBkYXRhLnZhbCgpOwoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgICAgICAgICAgICAgIHVzZXJNZWV0dXBJZC5wdXNoKG9ialtrZXldKTsKICAgICAgICAgICAgICAgICAgICB1c2VyTWVldHVwRmJLZXlzW29ialtrZXldXSA9IGtleTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXRVc2VyRmllbGQnLCB7CiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJNZWV0dXA6IHVzZXJNZWV0dXBJZCwKICAgICAgICAgICAgICAgICAgICBmYktleXM6IHVzZXJNZWV0dXBGYktleXMKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgb25seU9uY2U6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBmZXRjaFVzZXJJbmZvOiBmdW5jdGlvbiBmZXRjaFVzZXJJbmZvKF9yZWY4KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBjb21taXQsIGdldHRlcnMsIGRiOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmOC5jb21taXQsIGdldHRlcnMgPSBfcmVmOC5nZXR0ZXJzOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRMb2FkaW5nJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICBkYiA9IGdldERhdGFiYXNlKCk7CiAgICAgICAgICAgICAgICBvblZhbHVlKHJlZihkYiwgIi91c2Vycy8iLmNvbmNhdChnZXR0ZXJzLnVzZXIuaWQsICIvaW5mbyIpKSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSBkYXRhLnZhbCgpOwogICAgICAgICAgICAgICAgICB2YXIgcHJvZmlsZSA9IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAoaW5mbyA9PT0gbnVsbCB8fCBpbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbmZvLm5hbWUpIHx8ICcnLAogICAgICAgICAgICAgICAgICAgIGF2YXRhcjogKGluZm8gPT09IG51bGwgfHwgaW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5mby5hdmF0YXIpIHx8ICcnCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0VXNlckZpZWxkJywgcHJvZmlsZSk7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgb25seU9uY2U6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBlZGl0VXNlckluZm86IGZ1bmN0aW9uIGVkaXRVc2VySW5mbyhfcmVmOSwgaW5mbykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgY29tbWl0LCBnZXR0ZXJzLCBkYiwgc3RvcmFnZSwgdXBkYXRlcywgcHJvZmlsZU5hbWUsIHByb2ZpbGVBdmF0YXJGaWxlLCBlZGl0SW5mbywgZmlsZU5hbWUsIGV4cCwgZmlsZVVybCwgZmlsZU1ldGEsIGF2YXRhclVybDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjkuY29tbWl0LCBnZXR0ZXJzID0gX3JlZjkuZ2V0dGVyczsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIHRydWUpOwogICAgICAgICAgICAgICAgZGIgPSBnZXREYXRhYmFzZSgpOwogICAgICAgICAgICAgICAgc3RvcmFnZSA9IGdldFN0b3JhZ2UoKTsKICAgICAgICAgICAgICAgIHVwZGF0ZXMgPSB7fTsKICAgICAgICAgICAgICAgIHByb2ZpbGVOYW1lID0gaW5mby5uYW1lOwogICAgICAgICAgICAgICAgcHJvZmlsZUF2YXRhckZpbGUgPSBpbmZvLmF2YXRhcjsKICAgICAgICAgICAgICAgIGVkaXRJbmZvID0ge307CiAgICAgICAgICAgICAgICB1cGRhdGVzWycvdXNlcnMvJyArIGdldHRlcnMudXNlci5pZCArICcvaW5mby9uYW1lLyddID0gcHJvZmlsZU5hbWU7CiAgICAgICAgICAgICAgICBlZGl0SW5mby5uYW1lID0gcHJvZmlsZU5hbWU7CgogICAgICAgICAgICAgICAgaWYgKCFwcm9maWxlQXZhdGFyRmlsZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IHByb2ZpbGVBdmF0YXJGaWxlLm5hbWU7CiAgICAgICAgICAgICAgICBleHAgPSBmaWxlTmFtZS5zbGljZShmaWxlTmFtZS5sYXN0SW5kZXhPZignLicpKTsKICAgICAgICAgICAgICAgIGZpbGVVcmwgPSAndXNlcnMvJyArIGdldHRlcnMudXNlci5pZCArIGV4cDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICByZXR1cm4gdXBsb2FkQnl0ZXMoc1JlZihzdG9yYWdlLCBmaWxlVXJsKSwgcHJvZmlsZUF2YXRhckZpbGUpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgZmlsZU1ldGEgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RG93bmxvYWRVUkwoc1JlZihzdG9yYWdlLCBmaWxlTWV0YS5tZXRhZGF0YS5mdWxsUGF0aCkpOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgYXZhdGFyVXJsID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICB1cGRhdGVzWycvdXNlcnMvJyArIGdldHRlcnMudXNlci5pZCArICcvaW5mby9hdmF0YXInXSA9IGF2YXRhclVybDsKICAgICAgICAgICAgICAgIGVkaXRJbmZvLmF2YXRhciA9IGF2YXRhclVybDsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlKHJlZihkYiksIHVwZGF0ZXMpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRVc2VyRmllbGQnLCBlZGl0SW5mbyk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMTApIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxMC5jb21taXQ7CiAgICAgIHZhciBhdXRoID0gZ2V0QXV0aCgpOwogICAgICBzaWduT3V0KGF1dGgpLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICAgIGNvbW1pdCgnc2V0VXNlcicsIG51bGwpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/jean/Документы/GitHub/meetup-firebase/src/store/user/index.js"],"names":["getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","getDatabase","ref","push","set","onValue","update","remove","getStorage","sRef","uploadBytes","getDownloadURL","state","user","getters","mutations","userRegisterForMeetup","meetupIdObj","registerMeetup","id","fbKeys","fbKey","userUnRegisterFromMeetup","meetupId","splice","findIndex","meetup","setUser","newUser","setUserField","obj","field","actions","commit","db","registeredMeetups","meetupKey","key","then","catch","error","console","log","sighUpUser","auth","email","password","uid","name","avatar","sighInUser","autoAuth","fetchData","dispatch","fetchUserMeetup","userMeetupId","userMeetupFbKeys","data","val","onlyOnce","fetchUserInfo","info","profile","editUserInfo","storage","updates","profileName","profileAvatarFile","editInfo","fileName","exp","slice","lastIndexOf","fileUrl","fileMeta","metadata","fullPath","avatarUrl","logout"],"mappings":"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","sourcesContent":["import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut  } from \"firebase/auth\";\nimport { getDatabase, ref, push, set, onValue, update, remove} from \"firebase/database\";\nimport { getStorage, ref as sRef, uploadBytes, getDownloadURL } from \"firebase/storage\";\n\nexport default {\n  state: {\n\t\tuser: null,\n  },\n\n\tgetters: {\n\t\tuser(state) {\n\t\t\treturn state.user\n\t\t}\n\t},\n\n\tmutations: {\n\t\tuserRegisterForMeetup(state, meetupIdObj) {\n\t\t\tstate.user.registerMeetup.push(meetupIdObj.id)\n\t\t\tstate.user.fbKeys[meetupIdObj.id] = meetupIdObj.fbKey\n\t\t},\n\n\t\tuserUnRegisterFromMeetup(state, meetupId) {\n\t\t\tconst registerMeetup = state.user.registerMeetup\n\t\t\tregisterMeetup.splice(registerMeetup.findIndex(meetup => meetup === meetupId), 1)\n\t\t\tdelete state.user.fbKeys[meetupId]\n\t\t},\n\n\t\tsetUser(state, newUser) {\n\t\t\tstate.user = newUser\n\t\t},\n\t\tsetUserField(state, obj) {\n\t\t\tfor (const field in obj) {\n\t\t\t\tstate.user[field] = obj[field]\n\t\t\t}\n\t\t},\n\t},\n\n\tactions: {\n\t\tuserRegisterForMeetup({commit, getters}, meetupId) {\n\t\t\tcommit('setLoading', true)\n\t\t\tconst db = getDatabase()\n\t\t\tconst user = getters.user\n\t\t\tconst registeredMeetups = push(ref(db, `/users/${user.id}/registrations`))\n\t\t\tconst meetupKey = registeredMeetups.key\n\t\t\tset(registeredMeetups, meetupId)\n\t\t\t\t.then(() => {\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t\tcommit('userRegisterForMeetup', {id: meetupId, fbKey: meetupKey})\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t},\n\n\t\tuserUnRegisterFromMeetup({commit, getters}, meetupId) {\n\t\t\tcommit('setLoading', true)\n\t\t\tconst db = getDatabase()\n\t\t\tconst user = getters.user\n\t\t\tconst registeredMeetups = ref(db, `/users/${user.id}/registrations/${user.fbKeys[meetupId]}`)\n\t\t\tremove(registeredMeetups)\n\t\t\t\t.then(() => {\n\t\t\t\t\tcommit('userUnRegisterFromMeetup', meetupId)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t},\n\n\t\tsighUpUser({commit}, user) {\n\t\t\tcommit('setLoading', true)\n\t\t\tcommit('clearError')\n\t\t\tconst auth = getAuth()\n\t\t\tcreateUserWithEmailAndPassword(auth, user.email, user.password)\n\t\t\t\t.then(user => {\n\t\t\t\t\tconst newUser = {\n\t\t\t\t\t\tid: user.user.uid,\n\t\t\t\t\t\temail: user.user.email,\n\t\t\t\t\t\tregisterMeetup: [],\n\t\t\t\t\t\tfbKeys: {},\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\tavatar: ''\n\t\t\t\t\t}\n\t\t\t\t\tcommit('setUser', newUser)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tcommit('setError', error)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t},\n\n\t\tsighInUser({commit}, user) {\n\t\t\tcommit('setLoading', true)\n\t\t\tcommit('clearError')\n\t\t\tconst auth = getAuth()\n\t\t\tsignInWithEmailAndPassword(auth, user.email, user.password)\n\t\t\t\t.then(user => {\n\t\t\t\t\tconst newUser = {\n\t\t\t\t\t\tid: user.user.uid,\n\t\t\t\t\t\temail: user.user.email,\n\t\t\t\t\t\tregisterMeetup: [],\n\t\t\t\t\t\tfbKeys: {},\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\tavatar: ''\n\t\t\t\t\t}\n\t\t\t\t\tcommit('setUser', newUser)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tcommit('setError', error)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t},\n\n\t\tautoAuth({commit}, user) {\n\t\t\tcommit('setUser', {\n\t\t\t\tid: user.uid,\n\t\t\t\temail: user.email,\n\t\t\t\tregisterMeetup: [],\n\t\t\t\tfbKeys: {},\n\t\t\t\tname: '',\n\t\t\t\tavatar: ''\n\t\t\t})\n\t\t},\n\n\t\tasync fetchData({dispatch}) {\n\t\t\tawait dispatch('fetchUserMeetup')\n\t\t\tawait dispatch('fetchUserInfo')\n\t\t},\n\n\t\tasync fetchUserMeetup({commit, getters}) {\n\t\t\tcommit('setLoading', true)\n\t\t\tconst db = getDatabase()\n\t\t\tconst userMeetupId = []\n\t\t\tconst userMeetupFbKeys = {}\n\t\t\tonValue(ref(db, `/users/${getters.user.id}/registrations`), data => {\n\t\t\t\tconst obj = data.val()\n\t\t\t\tfor (let key in obj) {\n\t\t\t\t\tuserMeetupId.push(obj[key])\n\t\t\t\t\tuserMeetupFbKeys[obj[key]] = key\n\t\t\t\t}\n\t\t\t\tcommit('setUserField', {\n\t\t\t\t\tregisterMeetup: userMeetupId,\n\t\t\t\t\tfbKeys: userMeetupFbKeys\n\t\t\t\t})\n\t\t\t\tcommit('setLoading', false)\n\t\t\t}, {\n\t\t\t\tonlyOnce: true\n\t\t\t})\n\t\t},\n\n\t\tasync fetchUserInfo({commit, getters}) {\n\t\t\tcommit('setLoading', true)\n\n\t\t\tconst db = getDatabase()\n\n\t\t\tonValue(ref(db, `/users/${getters.user.id}/info`), data => {\n\t\t\t\tconst info = data.val()\n\t\t\t\tconst profile = {\n\t\t\t\t\tname: info?.name || '',\n\t\t\t\t\tavatar: info?.avatar || ''\n\t\t\t\t}\n\t\t\t\tcommit('setUserField', profile)\n\t\t\t\tcommit('setLoading', false)\n\t\t\t}, {\n\t\t\t\tonlyOnce: true\n\t\t\t})\n\t\t},\n\n\t\tasync editUserInfo({commit, getters}, info) {\n\t\t\tcommit('setLoading', true)\n\t\t\tconst db = getDatabase()\n\t\t\tconst storage = getStorage()\n\t\t\tconst updates = {}\n\t\t\tconst profileName = info.name\n\t\t\tconst profileAvatarFile = info.avatar\n\t\t\tconst editInfo = {}\n\n\t\t\tupdates['/users/' + getters.user.id + '/info/name/'] = profileName\n\t\t\teditInfo.name = profileName\n\n\t\t\tif (profileAvatarFile) {\n\n\t\t\t\t\tconst fileName = profileAvatarFile.name\n\t\t\t\t\tconst exp = fileName.slice(fileName.lastIndexOf('.'))\n\t\t\t\t\tconst fileUrl = 'users/' + getters.user.id + exp\n\t\t\t\t\tconst fileMeta = await uploadBytes(sRef(storage, fileUrl), profileAvatarFile)\n\t\t\t\t\tconst avatarUrl = await getDownloadURL(sRef(storage, fileMeta.metadata.fullPath))\n\n\t\t\t\t\tupdates['/users/' + getters.user.id + '/info/avatar'] = avatarUrl\n\t\t\t\t\teditInfo.avatar = avatarUrl\n\t\t\t}\n\t\t\tawait update(ref(db), updates)\n\t\t\tcommit('setUserField', editInfo)\n\t\t\tcommit('setLoading', false)\n\t\t},\n\n\t\tlogout({commit}) {\n\t\t\tconst auth = getAuth()\n\t\t\tsignOut(auth)\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t})\n\t\t\tcommit('setUser', null)\n\t\t}\n\t}\n}\n"]}]}