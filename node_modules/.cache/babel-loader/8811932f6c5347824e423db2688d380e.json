{"remainingRequest":"/home/jean/Документы/GitHub/meetup-firebase/node_modules/babel-loader/lib/index.js!/home/jean/Документы/GitHub/meetup-firebase/src/store/user/index.js","dependencies":[{"path":"/home/jean/Документы/GitHub/meetup-firebase/src/store/user/index.js","mtime":1645159015839},{"path":"/home/jean/Документы/GitHub/meetup-firebase/babel.config.js","mtime":1640172662233},{"path":"/home/jean/Документы/GitHub/meetup-firebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jean/Документы/GitHub/meetup-firebase/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2plYW4vXHUwNDE0XHUwNDNFXHUwNDNBXHUwNDQzXHUwNDNDXHUwNDM1XHUwNDNEXHUwNDQyXHUwNDRCL0dpdEh1Yi9tZWV0dXAtZmlyZWJhc2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgZ2V0QXV0aCwgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkLCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCwgc2lnbk91dCwgdXBkYXRlRW1haWwgYXMgX3VwZGF0ZUVtYWlsLCB1cGRhdGVQcm9maWxlLCByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsLCBFbWFpbEF1dGhQcm92aWRlciB9IGZyb20gImZpcmViYXNlL2F1dGgiOwppbXBvcnQgeyBnZXREYXRhYmFzZSwgcmVmLCBwdXNoLCBzZXQsIG9uVmFsdWUsIHVwZGF0ZSwgcmVtb3ZlIH0gZnJvbSAiZmlyZWJhc2UvZGF0YWJhc2UiOwppbXBvcnQgeyBnZXRTdG9yYWdlLCByZWYgYXMgc1JlZiwgdXBsb2FkQnl0ZXMsIGdldERvd25sb2FkVVJMIH0gZnJvbSAiZmlyZWJhc2Uvc3RvcmFnZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogewogICAgdXNlcjogbnVsbAogIH0sCiAgZ2V0dGVyczogewogICAgdXNlcjogZnVuY3Rpb24gdXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcjsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgdXNlclJlZ2lzdGVyRm9yTWVldHVwOiBmdW5jdGlvbiB1c2VyUmVnaXN0ZXJGb3JNZWV0dXAoc3RhdGUsIG1lZXR1cElkT2JqKSB7CiAgICAgIHN0YXRlLnVzZXIucmVnaXN0ZXJNZWV0dXAucHVzaChtZWV0dXBJZE9iai5pZCk7CiAgICAgIHN0YXRlLnVzZXIuZmJLZXlzW21lZXR1cElkT2JqLmlkXSA9IG1lZXR1cElkT2JqLmZiS2V5OwogICAgfSwKICAgIHVzZXJVblJlZ2lzdGVyRnJvbU1lZXR1cDogZnVuY3Rpb24gdXNlclVuUmVnaXN0ZXJGcm9tTWVldHVwKHN0YXRlLCBtZWV0dXBJZCkgewogICAgICB2YXIgcmVnaXN0ZXJNZWV0dXAgPSBzdGF0ZS51c2VyLnJlZ2lzdGVyTWVldHVwOwogICAgICByZWdpc3Rlck1lZXR1cC5zcGxpY2UocmVnaXN0ZXJNZWV0dXAuZmluZEluZGV4KGZ1bmN0aW9uIChtZWV0dXApIHsKICAgICAgICByZXR1cm4gbWVldHVwID09PSBtZWV0dXBJZDsKICAgICAgfSksIDEpOwogICAgICBkZWxldGUgc3RhdGUudXNlci5mYktleXNbbWVldHVwSWRdOwogICAgfSwKICAgIHNldFVzZXI6IGZ1bmN0aW9uIHNldFVzZXIoc3RhdGUsIG5ld1VzZXIpIHsKICAgICAgc3RhdGUudXNlciA9IG5ld1VzZXI7CiAgICB9LAogICAgc2V0VXNlckZpZWxkOiBmdW5jdGlvbiBzZXRVc2VyRmllbGQoc3RhdGUsIG9iaikgewogICAgICBmb3IgKHZhciBmaWVsZCBpbiBvYmopIHsKICAgICAgICBzdGF0ZS51c2VyW2ZpZWxkXSA9IG9ialtmaWVsZF07CiAgICAgIH0KICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHVzZXJSZWdpc3RlckZvck1lZXR1cDogZnVuY3Rpb24gdXNlclJlZ2lzdGVyRm9yTWVldHVwKF9yZWYsIG1lZXR1cElkKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdCwKICAgICAgICAgIGdldHRlcnMgPSBfcmVmLmdldHRlcnM7CiAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIHRydWUpOwogICAgICB2YXIgZGIgPSBnZXREYXRhYmFzZSgpOwogICAgICB2YXIgdXNlciA9IGdldHRlcnMudXNlcjsKICAgICAgdmFyIHJlZ2lzdGVyZWRNZWV0dXBzID0gcHVzaChyZWYoZGIsICIvdXNlcnMvIi5jb25jYXQodXNlci5pZCwgIi9yZWdpc3RyYXRpb25zIikpKTsKICAgICAgdmFyIG1lZXR1cEtleSA9IHJlZ2lzdGVyZWRNZWV0dXBzLmtleTsKICAgICAgc2V0KHJlZ2lzdGVyZWRNZWV0dXBzLCBtZWV0dXBJZCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29tbWl0KCdzZXRMb2FkaW5nJywgZmFsc2UpOwogICAgICAgIGNvbW1pdCgndXNlclJlZ2lzdGVyRm9yTWVldHVwJywgewogICAgICAgICAgaWQ6IG1lZXR1cElkLAogICAgICAgICAgZmJLZXk6IG1lZXR1cEtleQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgY29tbWl0KCdzZXRMb2FkaW5nJywgZmFsc2UpOwogICAgICB9KTsKICAgIH0sCiAgICB1c2VyVW5SZWdpc3RlckZyb21NZWV0dXA6IGZ1bmN0aW9uIHVzZXJVblJlZ2lzdGVyRnJvbU1lZXR1cChfcmVmMiwgbWVldHVwSWQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICAgIGdldHRlcnMgPSBfcmVmMi5nZXR0ZXJzOwogICAgICBjb21taXQoJ3NldExvYWRpbmcnLCB0cnVlKTsKICAgICAgdmFyIGRiID0gZ2V0RGF0YWJhc2UoKTsKICAgICAgdmFyIHVzZXIgPSBnZXR0ZXJzLnVzZXI7CiAgICAgIHZhciByZWdpc3RlcmVkTWVldHVwcyA9IHJlZihkYiwgIi91c2Vycy8iLmNvbmNhdCh1c2VyLmlkLCAiL3JlZ2lzdHJhdGlvbnMvIikuY29uY2F0KHVzZXIuZmJLZXlzW21lZXR1cElkXSkpOwogICAgICByZW1vdmUocmVnaXN0ZXJlZE1lZXR1cHMpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGNvbW1pdCgndXNlclVuUmVnaXN0ZXJGcm9tTWVldHVwJywgbWVldHVwSWQpOwogICAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIGZhbHNlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIGZhbHNlKTsKICAgICAgfSk7CiAgICB9LAogICAgc2lnaFVwVXNlcjogZnVuY3Rpb24gc2lnaFVwVXNlcihfcmVmMywgdXNlckRhdGEpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgY29tbWl0KCdzZXRMb2FkaW5nJywgdHJ1ZSk7CiAgICAgIGNvbW1pdCgnY2xlYXJFcnJvcicpOwogICAgICB2YXIgYXV0aCA9IGdldEF1dGgoKTsKICAgICAgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIHVzZXJEYXRhLmVtYWlsLCB1c2VyRGF0YS5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAgIHZhciBuZXdVc2VyID0gewogICAgICAgICAgaWQ6IHVzZXIudXNlci51aWQsCiAgICAgICAgICBlbWFpbDogdXNlci51c2VyLmVtYWlsLAogICAgICAgICAgcmVnaXN0ZXJNZWV0dXA6IFtdLAogICAgICAgICAgZmJLZXlzOiB7fSwKICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgYXZhdGFyOiAnJwogICAgICAgIH07CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJQYXNzJywgIiIuY29uY2F0KHVzZXJEYXRhLnBhc3N3b3JkKSk7CiAgICAgICAgY29tbWl0KCdzZXRVc2VyJywgbmV3VXNlcik7CiAgICAgICAgY29tbWl0KCdzZXRMb2FkaW5nJywgZmFsc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb21taXQoJ3NldEVycm9yJywgZXJyb3IpOwogICAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIGZhbHNlKTsKICAgICAgfSk7CiAgICB9LAogICAgc2lnaEluVXNlcjogZnVuY3Rpb24gc2lnaEluVXNlcihfcmVmNCwgdXNlckRhdGEpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjQuZGlzcGF0Y2g7CiAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIHRydWUpOwogICAgICBjb21taXQoJ2NsZWFyRXJyb3InKTsKICAgICAgdmFyIGF1dGggPSBnZXRBdXRoKCk7CiAgICAgIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIHVzZXJEYXRhLmVtYWlsLCB1c2VyRGF0YS5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAgIHZhciBuZXdVc2VyID0gewogICAgICAgICAgaWQ6IHVzZXIudXNlci51aWQsCiAgICAgICAgICBlbWFpbDogdXNlci51c2VyLmVtYWlsLAogICAgICAgICAgcmVnaXN0ZXJNZWV0dXA6IFtdLAogICAgICAgICAgZmJLZXlzOiB7fSwKICAgICAgICAgIG5hbWU6IHVzZXIudXNlci5kaXNwbGF5TmFtZSwKICAgICAgICAgIGF2YXRhcjogdXNlci51c2VyLnBob3RvVVJMCiAgICAgICAgfTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlclBhc3MnLCAiIi5jb25jYXQodXNlckRhdGEucGFzc3dvcmQpKTsKICAgICAgICByZXR1cm4gbmV3VXNlcjsKICAgICAgfSkudGhlbihmdW5jdGlvbiAobmV3VXNlcikgewogICAgICAgIGNvbW1pdCgnc2V0VXNlcicsIG5ld1VzZXIpOwogICAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIGZhbHNlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29tbWl0KCdzZXRFcnJvcicsIGVycm9yKTsKICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGF1dG9BdXRoOiBmdW5jdGlvbiBhdXRvQXV0aChfcmVmNSwgdXNlcikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgICBjb21taXQoJ3NldFVzZXInLCB7CiAgICAgICAgaWQ6IHVzZXIudWlkLAogICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLAogICAgICAgIHJlZ2lzdGVyTWVldHVwOiBbXSwKICAgICAgICBmYktleXM6IHt9LAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGF2YXRhcjogJycKICAgICAgfSk7CiAgICB9LAogICAgZmV0Y2hEYXRhOiBmdW5jdGlvbiBmZXRjaERhdGEoX3JlZjYpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGlzcGF0Y2g7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmNi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdmZXRjaFVzZXJNZWV0dXAnKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2ZldGNoVXNlckluZm8nKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGZldGNoVXNlck1lZXR1cDogZnVuY3Rpb24gZmV0Y2hVc2VyTWVldHVwKF9yZWY3KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBjb21taXQsIGdldHRlcnMsIGRiLCB1c2VyTWVldHVwSWQsIHVzZXJNZWV0dXBGYktleXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY3LmNvbW1pdCwgZ2V0dGVycyA9IF9yZWY3LmdldHRlcnM7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCB0cnVlKTsKICAgICAgICAgICAgICAgIGRiID0gZ2V0RGF0YWJhc2UoKTsKICAgICAgICAgICAgICAgIHVzZXJNZWV0dXBJZCA9IFtdOwogICAgICAgICAgICAgICAgdXNlck1lZXR1cEZiS2V5cyA9IHt9OwogICAgICAgICAgICAgICAgb25WYWx1ZShyZWYoZGIsICIvdXNlcnMvIi5jb25jYXQoZ2V0dGVycy51c2VyLmlkLCAiL3JlZ2lzdHJhdGlvbnMiKSksIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBkYXRhLnZhbCgpOwoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgICAgICAgICAgICAgIHVzZXJNZWV0dXBJZC5wdXNoKG9ialtrZXldKTsKICAgICAgICAgICAgICAgICAgICB1c2VyTWVldHVwRmJLZXlzW29ialtrZXldXSA9IGtleTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXRVc2VyRmllbGQnLCB7CiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJNZWV0dXA6IHVzZXJNZWV0dXBJZCwKICAgICAgICAgICAgICAgICAgICBmYktleXM6IHVzZXJNZWV0dXBGYktleXMKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgb25seU9uY2U6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBmZXRjaFVzZXJJbmZvOiBmdW5jdGlvbiBmZXRjaFVzZXJJbmZvKF9yZWY4KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBjb21taXQsIGdldHRlcnMsIGF1dGgsIHVzZXIsIGRiLCBvYmo7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY4LmNvbW1pdCwgZ2V0dGVycyA9IF9yZWY4LmdldHRlcnM7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCB0cnVlKTsKICAgICAgICAgICAgICAgIGF1dGggPSBnZXRBdXRoKCk7CiAgICAgICAgICAgICAgICB1c2VyID0gYXV0aC5jdXJyZW50VXNlcjsKICAgICAgICAgICAgICAgIGRiID0gZ2V0RGF0YWJhc2UoKTsKICAgICAgICAgICAgICAgIG9iaiA9IHsKICAgICAgICAgICAgICAgICAgbmFtZTogKHVzZXIgPT09IG51bGwgfHwgdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogdXNlci5kaXNwbGF5TmFtZSkgfHwgJycsCiAgICAgICAgICAgICAgICAgIGF2YXRhcjogKHVzZXIgPT09IG51bGwgfHwgdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogdXNlci5waG90b1VSTCkgfHwgJycKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFVzZXJGaWVsZCcsIG9iaik7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGVkaXRVc2VySW5mbzogZnVuY3Rpb24gZWRpdFVzZXJJbmZvKF9yZWY5LCBpbmZvKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgY29tbWl0LCBnZXR0ZXJzLCBhdXRoLCB1c2VyLCBzdG9yYWdlLCBwcm9maWxlQXZhdGFyRmlsZSwgcHJvZmlsZUVtYWlsLCByZXFJbmZvLCBlZGl0SW5mbywgZmlsZU5hbWUsIGV4cCwgZmlsZVVybCwgZmlsZU1ldGEsIGF2YXRhclVybDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjkuY29tbWl0LCBnZXR0ZXJzID0gX3JlZjkuZ2V0dGVyczsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0TG9hZGluZycsIHRydWUpOwogICAgICAgICAgICAgICAgYXV0aCA9IGdldEF1dGgoKTsKICAgICAgICAgICAgICAgIHVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyOwogICAgICAgICAgICAgICAgc3RvcmFnZSA9IGdldFN0b3JhZ2UoKTsKICAgICAgICAgICAgICAgIHByb2ZpbGVBdmF0YXJGaWxlID0gaW5mby5hdmF0YXI7CiAgICAgICAgICAgICAgICBwcm9maWxlRW1haWwgPSBpbmZvLmVtYWlsOwogICAgICAgICAgICAgICAgcmVxSW5mbyA9IHsKICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGluZm8ubmFtZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGVkaXRJbmZvID0gewogICAgICAgICAgICAgICAgICBuYW1lOiBpbmZvLm5hbWUKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKCFwcm9maWxlQXZhdGFyRmlsZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IHByb2ZpbGVBdmF0YXJGaWxlLm5hbWU7CiAgICAgICAgICAgICAgICBleHAgPSBmaWxlTmFtZS5zbGljZShmaWxlTmFtZS5sYXN0SW5kZXhPZignLicpKTsKICAgICAgICAgICAgICAgIGZpbGVVcmwgPSAndXNlcnMvJyArIGdldHRlcnMudXNlci5pZCArIGV4cDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gdXBsb2FkQnl0ZXMoc1JlZihzdG9yYWdlLCBmaWxlVXJsKSwgcHJvZmlsZUF2YXRhckZpbGUpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgZmlsZU1ldGEgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RG93bmxvYWRVUkwoc1JlZihzdG9yYWdlLCBmaWxlTWV0YS5tZXRhZGF0YS5mdWxsUGF0aCkpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgYXZhdGFyVXJsID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXFJbmZvLnBob3RvVVJMID0gYXZhdGFyVXJsOwogICAgICAgICAgICAgICAgZWRpdEluZm8uYXZhdGFyID0gYXZhdGFyVXJsOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgaWYgKCFwcm9maWxlRW1haWwpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXNwYXRjaCgndXBkYXRlRW1haWwnLCB7CiAgICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIsCiAgICAgICAgICAgICAgICAgIHByb2ZpbGVFbWFpbDogcHJvZmlsZUVtYWlsCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICAgIHVwZGF0ZVByb2ZpbGUodXNlciwgcmVxSW5mbykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0VXNlckZpZWxkJywgZWRpdEluZm8pOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHVwZGF0ZUVtYWlsOiBmdW5jdGlvbiB1cGRhdGVFbWFpbChfcmVmMTAsIF9yZWYxMSkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgY29tbWl0LCB1c2VyLCBwcm9maWxlRW1haWw7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYxMC5jb21taXQ7CiAgICAgICAgICAgICAgICB1c2VyID0gX3JlZjExLnVzZXIsIHByb2ZpbGVFbWFpbCA9IF9yZWYxMS5wcm9maWxlRW1haWw7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdXBkYXRlRW1haWwodXNlciwgcHJvZmlsZUVtYWlsKTsKICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldFVzZXJGaWVsZCcsIHsKICAgICAgICAgICAgICAgICAgICBlbWFpbDogcHJvZmlsZUVtYWlsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICByZXMoJ29rJyk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIHZhciB1c2VyUGFzcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyUGFzcycpOwogICAgICAgICAgICAgICAgICB2YXIgY3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodXNlci5lbWFpbCwgdXNlclBhc3MpOwogICAgICAgICAgICAgICAgICByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKHVzZXIsIGNyZWRlbnRpYWwpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0VXNlckZpZWxkJywgewogICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHByb2ZpbGVFbWFpbAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJlcygpOwogICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgICAgICByZWooKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYxMikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjEyLmNvbW1pdDsKICAgICAgdmFyIGF1dGggPSBnZXRBdXRoKCk7CiAgICAgIHNpZ25PdXQoYXV0aCkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXJQYXNzJyk7CiAgICAgIGNvbW1pdCgnc2V0VXNlcicsIG51bGwpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/jean/Документы/GitHub/meetup-firebase/src/store/user/index.js"],"names":["getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","updateEmail","updateProfile","reauthenticateWithCredential","EmailAuthProvider","getDatabase","ref","push","set","onValue","update","remove","getStorage","sRef","uploadBytes","getDownloadURL","state","user","getters","mutations","userRegisterForMeetup","meetupIdObj","registerMeetup","id","fbKeys","fbKey","userUnRegisterFromMeetup","meetupId","splice","findIndex","meetup","setUser","newUser","setUserField","obj","field","actions","commit","db","registeredMeetups","meetupKey","key","then","catch","error","console","log","sighUpUser","userData","auth","email","password","uid","name","avatar","localStorage","setItem","sighInUser","dispatch","displayName","photoURL","autoAuth","fetchData","fetchUserMeetup","userMeetupId","userMeetupFbKeys","data","val","onlyOnce","fetchUserInfo","currentUser","editUserInfo","info","storage","profileAvatarFile","profileEmail","reqInfo","editInfo","fileName","exp","slice","lastIndexOf","fileUrl","fileMeta","metadata","fullPath","avatarUrl","err","finally","Promise","res","rej","userPass","getItem","credential","logout","removeItem"],"mappings":"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","sourcesContent":["import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, updateEmail, updateProfile, reauthenticateWithCredential, EmailAuthProvider  } from \"firebase/auth\";\nimport { getDatabase, ref, push, set, onValue, update, remove} from \"firebase/database\";\nimport { getStorage, ref as sRef, uploadBytes, getDownloadURL } from \"firebase/storage\";\n\nexport default {\n  state: {\n\t\tuser: null,\n  },\n\n\tgetters: {\n\t\tuser(state) {\n\t\t\treturn state.user\n\t\t}\n\t},\n\n\tmutations: {\n\t\tuserRegisterForMeetup(state, meetupIdObj) {\n\t\t\tstate.user.registerMeetup.push(meetupIdObj.id)\n\t\t\tstate.user.fbKeys[meetupIdObj.id] = meetupIdObj.fbKey\n\t\t},\n\n\t\tuserUnRegisterFromMeetup(state, meetupId) {\n\t\t\tconst registerMeetup = state.user.registerMeetup\n\t\t\tregisterMeetup.splice(registerMeetup.findIndex(meetup => meetup === meetupId), 1)\n\t\t\tdelete state.user.fbKeys[meetupId]\n\t\t},\n\n\t\tsetUser(state, newUser) {\n\t\t\tstate.user = newUser\n\t\t},\n\t\tsetUserField(state, obj) {\n\t\t\tfor (const field in obj) {\n\t\t\t\tstate.user[field] = obj[field]\n\t\t\t}\n\t\t},\n\t},\n\n\tactions: {\n\t\tuserRegisterForMeetup({commit, getters}, meetupId) {\n\t\t\tcommit('setLoading', true)\n\t\t\tconst db = getDatabase()\n\t\t\tconst user = getters.user\n\t\t\tconst registeredMeetups = push(ref(db, `/users/${user.id}/registrations`))\n\t\t\tconst meetupKey = registeredMeetups.key\n\t\t\tset(registeredMeetups, meetupId)\n\t\t\t\t.then(() => {\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t\tcommit('userRegisterForMeetup', {id: meetupId, fbKey: meetupKey})\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t},\n\n\t\tuserUnRegisterFromMeetup({commit, getters}, meetupId) {\n\t\t\tcommit('setLoading', true)\n\t\t\tconst db = getDatabase()\n\t\t\tconst user = getters.user\n\t\t\tconst registeredMeetups = ref(db, `/users/${user.id}/registrations/${user.fbKeys[meetupId]}`)\n\t\t\tremove(registeredMeetups)\n\t\t\t\t.then(() => {\n\t\t\t\t\tcommit('userUnRegisterFromMeetup', meetupId)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t},\n\n\t\tsighUpUser({commit}, userData) {\n\t\t\tcommit('setLoading', true)\n\t\t\tcommit('clearError')\n\t\t\tconst auth = getAuth()\n\t\t\tcreateUserWithEmailAndPassword(auth, userData.email, userData.password)\n\t\t\t\t.then(user => {\n\t\t\t\t\tconst newUser = {\n\t\t\t\t\t\tid: user.user.uid,\n\t\t\t\t\t\temail: user.user.email,\n\t\t\t\t\t\tregisterMeetup: [],\n\t\t\t\t\t\tfbKeys: {},\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\tavatar: ''\n\t\t\t\t\t}\n\t\t\t\t\tlocalStorage.setItem('userPass', `${userData.password}`)\n\t\t\t\t\tcommit('setUser', newUser)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tcommit('setError', error)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t},\n\n\t\tsighInUser({commit, dispatch}, userData) {\n\t\t\tcommit('setLoading', true)\n\t\t\tcommit('clearError')\n\t\t\tconst auth = getAuth()\n\t\t\tsignInWithEmailAndPassword(auth, userData.email, userData.password)\n\t\t\t\t.then(user => {\n\t\t\t\t\tconst newUser = {\n\t\t\t\t\t\tid: user.user.uid,\n\t\t\t\t\t\temail: user.user.email,\n\t\t\t\t\t\tregisterMeetup: [],\n\t\t\t\t\t\tfbKeys: {},\n\t\t\t\t\t\tname: user.user.displayName,\n\t\t\t\t\t\tavatar: user.user.photoURL\n\t\t\t\t\t}\n\t\t\t\t\tlocalStorage.setItem('userPass', `${userData.password}`)\n\t\t\t\t\treturn newUser\n\t\t\t\t})\n\t\t\t\t.then((newUser) => {\n\t\t\t\t\tcommit('setUser', newUser)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tcommit('setError', error)\n\t\t\t\t\tcommit('setLoading', false)\n\t\t\t\t})\n\t\t},\n\n\t\tautoAuth({commit}, user) {\n\t\t\tcommit('setUser', {\n\t\t\t\tid: user.uid,\n\t\t\t\temail: user.email,\n\t\t\t\tregisterMeetup: [],\n\t\t\t\tfbKeys: {},\n\t\t\t\tname: '',\n\t\t\t\tavatar: ''\n\t\t\t})\n\t\t},\n\n\t\tasync fetchData({dispatch}) {\n\t\t\tawait dispatch('fetchUserMeetup')\n\t\t\tawait dispatch('fetchUserInfo')\n\t\t},\n\n\t\tasync fetchUserMeetup({commit, getters}) {\n\t\t\tcommit('setLoading', true)\n\t\t\tconst db = getDatabase()\n\t\t\tconst userMeetupId = []\n\t\t\tconst userMeetupFbKeys = {}\n\t\t\tonValue(ref(db, `/users/${getters.user.id}/registrations`), data => {\n\t\t\t\tconst obj = data.val()\n\t\t\t\tfor (let key in obj) {\n\t\t\t\t\tuserMeetupId.push(obj[key])\n\t\t\t\t\tuserMeetupFbKeys[obj[key]] = key\n\t\t\t\t}\n\t\t\t\tcommit('setUserField', {\n\t\t\t\t\tregisterMeetup: userMeetupId,\n\t\t\t\t\tfbKeys: userMeetupFbKeys\n\t\t\t\t})\n\t\t\t\tcommit('setLoading', false)\n\t\t\t}, {\n\t\t\t\tonlyOnce: true\n\t\t\t})\n\t\t},\n\n\t\tasync fetchUserInfo({commit, getters}) {\n\t\t\tcommit('setLoading', true)\n\n\t\t\tconst auth = getAuth()\n\t\t\tconst user = auth.currentUser\n\t\t\tconst db = getDatabase()\n\n\t\t\tconst obj = {\n\t\t\t\tname: user?.displayName || '',\n\t\t\t\tavatar: user?.photoURL || '',\n\t\t\t}\n\t\t\tcommit('setUserField', obj)\n\t\t\tcommit('setLoading', false)\n\t\t},\n\n\t\tasync editUserInfo({commit, getters}, info) {\n\t\t\tcommit('setLoading', true)\n\n\t\t\tconst auth = getAuth()\n\t\t\tconst user = auth.currentUser\n\n\t\t\tconst storage = getStorage()\n\t\t\tconst profileAvatarFile = info.avatar\n\t\t\tconst profileEmail = info.email\n\t\t\tconst reqInfo = {\n\t\t\t\tdisplayName: info.name\n\t\t\t}\n\t\t\tconst editInfo = {\n\t\t\t\tname: info.name\n\t\t\t}\n\n\t\t\tif (profileAvatarFile) {\n\n\t\t\t\t\tconst fileName = profileAvatarFile.name\n\t\t\t\t\tconst exp = fileName.slice(fileName.lastIndexOf('.'))\n\t\t\t\t\tconst fileUrl = 'users/' + getters.user.id + exp\n\t\t\t\t\tconst fileMeta = await uploadBytes(sRef(storage, fileUrl), profileAvatarFile)\n\t\t\t\t\tconst avatarUrl = await getDownloadURL(sRef(storage, fileMeta.metadata.fullPath))\n\t\t\t\t\t\n\t\t\t\t\treqInfo.photoURL = avatarUrl\n\t\t\t\t\teditInfo.avatar = avatarUrl \n\t\t\t}\n\n\t\t\tif (profileEmail) {\n\t\t\t\tawait this.dispatch('updateEmail', {user, profileEmail})\n\t\t\t}\n\n\t\t\tupdateProfile(user, reqInfo)\n\t\t\t\t.then(() => {\n\t\t\t\t\tcommit('setUserField', editInfo)\n\t\t\t\t})\n\t\t\t\t.catch(err => console.log(err))\n\t\t\t\t.finally(() => {\n\t\t\t\t\tcommit('setLoading', false)\n\n\t\t\t\t})\n\n\t\t},\n\n\t\tasync updateEmail({commit}, {user, profileEmail}) {\n\t\t\treturn new Promise((res, rej) => {\n\t\t\t\treturn updateEmail(user, profileEmail)\n\t\t\t}).then(() => {\n\t\t\t\tcommit('setUserField', {email : profileEmail})\n\t\t\t\tres('ok')\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\t\t\tconst userPass = localStorage.getItem('userPass')\n\t\t\t\t\t\tconst credential = EmailAuthProvider.credential(\n\t\t\t\t\t\t\tuser.email,\n\t\t\t\t\t\t\tuserPass\n\t\t\t\t\t\t);\n\t\t\t\t\t\treauthenticateWithCredential(user, credential)\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tcommit('setUserField', {email :profileEmail})\n\t\t\t\t\t\t\t\tres()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\t\trej()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t},\n\n\t\tlogout({commit}) {\n\t\t\tconst auth = getAuth()\n\t\t\tsignOut(auth)\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t})\n\t\t\tlocalStorage.removeItem('userPass')\n\t\t\tcommit('setUser', null)\n\t\t}\n\t}\n}\n"]}]}